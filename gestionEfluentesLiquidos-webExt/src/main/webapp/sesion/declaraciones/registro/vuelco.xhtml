<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>

    </h:head>
    <h:body>
        <p:growl id="messages" showDetail="false" />
        <b:modal id="dlgAyudaVuelcoGral" title="Registro de DJ - Vuelco" styleClass="modalAyudaVuelcoGral"
            closable="true" >
            <p><h:outputLabel style="font-size: 14px; color: background; font-weight: lighter" value="Hacer click en el botón verde 'Actualizar' 
                              antes de iniciar el ingreso de datos."/></p>
                <p><h:outputLabel style="font-size: 14px; color: background; font-weight: lighter" value="Indicar el nombre del organismo que 
                                  extiende el permiso, autorización o factibilidad hidráulica de vuelco, según corresponda. El volumen del 
                                  caudal autorizado que consta en el permiso debe indicarse en m³/día, utilizando un punto en caso de haber 
                                  decimales. Indicar el nombre completo de la calle por la cual se autoriza el vuelco, según obra en el permiso.
                                  Si estos campos se dejan sin completar, se entiende que el establecimiento no posee la autorización de vuelco 
                                  correspondiente, ya sea porque no efectúa vuelcos o por cualquier otro motivo."/></p>
                Hacer click en el botón verde "Actualizar" antes de iniciar el ingreso de datos. 
                Los vuelcos declarados y guardados se muestran en una lista al final del formulario. 
                
                Una vez consignados los datos podrá guardar los mismos en borrador mediante el botón 
                azul del inferior del formulario. Una vez guardados, podrá editarlos mientras la Declaración
                no esté firmada. También podrá eliminar los datos guardados mediante el botón Eliminar Vuelco 
                Registrado para borrar los datos cargados.
                Para guardar estos datos, primero deberá guardar los Datos complementarios.
            <f:facet name="footer">
                <b:button value="Cerrar" dismiss="modal" onclick="return false;"/>
            </f:facet>
        </b:modal>
        <b:modal id="dlgAyudaVuelcoInscrip" title="Registro de DJ - Vuelco - Datos registrados en DRP" styleClass="modalAyudaVuelcoInscrip"
            closable="true" >
            <p><h:outputLabel style="font-size: 14px; color: background; font-weight: lighter" value="Descripción del Proceso Productivo: 
                                  En este apartado se puede tipear la descripción literal de la actividad principal del establecimiento y una 
                                  breve explicación de la misma."/></p>
            <p><h:outputLabel style="font-size: 14px; color: background; font-weight: lighter" value="Selecionar Establecimiento en DRP: 
                              Al indicar ON se entiende que el establecimiento se encuentra inscripto en el registro de la Dirección de 
                              Residuos Peligrosos (DRP) del Ministerio de Ambiente y Desarrollo Sustentable de la Nación. En tal caso, 
                              deberá clickear en el botón Agregar/Editar y validar los datos del registro en la DRP en la ventana emergente. 
                              Actualizar antes de cargar los datos, a continuación ingresar el usuario DRP (del SIMEL - ej: 45698668741/1) y 
                              Guardar los datos validados antes de Cerrar la ventana emergente. También se puede borrar esta información 
                              con el botón Limpiar los datos validados. Actualizar al finalizar la carga. Al indicar OFF se entiende que 
                              el establecimiento no se encuentra inscripto en el registro de la DRP."/></p>
            <p><h:outputLabel style="font-size: 14px; color: background; font-weight: lighter" value="Radio de servido cloacas AySA: 
                              Al indicar ON se entiende que el establecimiento se encuentra ubicado dentro del radio alcanzado por el 
                              servicio de cloacas de la empresa AySA. Al indicar OFF se entiende que el establecimiento no se encuentra 
                              ubicado dentro del radio alcanzado por el servicio de cloacas de la empresa AySA."/></p>
            <f:facet name="footer">
                <b:button value="Cerrar" dismiss="modal" onclick="return false;"/>
            </f:facet>
        </b:modal>
        <b:modal id="dlgAyudaFrmHorarios" title="Registro de DJ - Vuelco - Registro/Edición Horario Descargas" styleClass="modalAyudaFrmHorarios" closable="true" >
                Al indicar ON se entiende que el vuelco es de carácter continuo dentro de todo el horario laboral del establecimiento 
                y no es necesario agregar otro dato. Al indicar OFF se hace obligatorio consignar días y horarios de inicio y finalización 
                del vuelco.
                Elegir el día en el menú desplegable, tiperar los horarios correspondientes (Hora de 1 a 24 y Min de 1 a 59). 
                Si se elige un día, se hace obligatorio poner horario de inicio y fin de la descarga. Luego Guardar la información. 
                Una vez guardado, se podrá editar o eliminar a través de los botones indicados que aparecerán a la derecha del listado 
                que se abre en la parte inferior.  El botón Limpiar permite borrar toda la información consignada en el formulario. 
                El botón Cancelar Selección permite anular la selección efectuada sobre el menú desplegable.
                En caso de efectuarse más de un vuelco el mismo día, deberá seleccionarse tal día tantas veces como vuelcos se realicen, 
                y consignar los horarios de inicio y fin de la descarga.

            <f:facet name="footer">
                <b:button value="Cerrar" dismiss="modal" onclick="return false;"/>
            </f:facet>
        </b:modal>
        
        <!-- Formulario validar DRP -->
        <b:modal id="dlgValidDrp" styleClass="modalValidDrp" closable="true" >
            <h:form prependId="false" id="frValidDrp">
                <b:panel id="pnValidDrp" title="Validar los datos del Establecimiento en la DRP" look="info" collapsible="false" >
                    <b:row>
                        <b:column span="10">
                            <b:inputText id="txtUsDrp" label="" placeholder="Ingrese el usuario DRP ([CUIT]/[numOrden])" value="#{mbDeclaraciones.usDrp}" />

                        </b:column>
                        <b:column span="2">
                            <b:commandButton id="btnValidar" action="#{mbDeclaraciones.validarUsuarioDrp(1)}" look="primary" icon="glyphicon-check" value=""
                                     ajax="true" update="messages,frValidDrp" />
                        </b:column>
                    </b:row>

                    <h:panelGrid columns="1" style="width: 100%" rendered="#{mbDeclaraciones.expGen.id gt 0}">
                        <b:row>
                            <b:column span="4">
                                <p:outputLabel style="font-weight: lighter; color: gray" value="N° Exp.: " />
                            </b:column>
                            <b:column span="8">
                                <b:inputText disabled="true" label="" value="#{mbDeclaraciones.expGen.expNumero}" />
                            </b:column>
                        </b:row>
                        <b:row>
                            <b:column span="4">
                                <p:outputLabel style="font-weight: lighter; color: gray" value="Año Exp.: " />
                            </b:column>
                            <b:column span="8">
                                <b:inputText disabled="true" label="" value="#{mbDeclaraciones.expGen.expAnio}" />
                            </b:column>
                        </b:row>
                        <b:row>
                            <b:column span="4">
                                <p:outputLabel style="font-weight: lighter; color: gray" value="N° CAA.: " />
                            </b:column>
                            <b:column span="8">
                                <b:inputText disabled="true" label="" value="#{mbDeclaraciones.expGen.caNumero}" />
                            </b:column>
                        </b:row>
                        <b:row>
                            <b:column span="4">
                                <p:outputLabel style="font-weight: lighter; color: gray" value="Fecha venc. CAA.: " />
                            </b:column>
                            <b:column span="8">
                                <p:calendar disabled="true" label="" value="#{mbDeclaraciones.expGen.caVencimiento.toGregorianCalendar().time}" pattern="dd/MM/yyyy" locale="es" />
                            </b:column>
                        </b:row>
                        <b:row>
                            <b:column span="4">
                                <p:outputLabel style="font-weight: lighter; color: gray" value="Us DRP: " />
                            </b:column>
                            <b:column span="8">
                                <b:inputText disabled="true" label="" value="#{mbDeclaraciones.expGen.usuario}" />
                            </b:column>
                        </b:row>
                        <b:row>
                            <b:column span="4">
                                <p:outputLabel style="font-weight: lighter; color: gray" value="Nombre Est.: " />
                            </b:column>
                            <b:column span="8">
                                <b:inputText disabled="true" label="" value="#{mbDeclaraciones.expGen.nombre}" />
                            </b:column>
                        </b:row>
                        <b:row>
                            <b:column span="4">
                                <p:outputLabel style="font-weight: lighter; color: gray" value="Descrip.: " />
                            </b:column>
                            <b:column span="8">
                                <b:inputText disabled="true" label="" value="#{mbDeclaraciones.expGen.descripcion}" />
                            </b:column>
                        </b:row>
                    </h:panelGrid>
                    <b:commandButton value="Actualizar" icon="glyphicon-refresh" look="success" update="frValidDrp" />
                    <b:commandButton icon="glyphicon-ok" action="#{mbDeclaraciones.guardarDtosValidDrp}" look="primary" value="#{mbDeclaraciones.mdGuardarDatosValidDrp}" 
                                     ajax="true" update="@next,frTabVuelcos,messages" process="@this" oncomplete="closeModalValidDrp()" />
                    <b:commandButton action="#{mbDeclaraciones.limpiarDatosValid}" icon="glyphicon-trash" value="#{mbDeclaraciones.mdLimpiarDatosValidDrp}" 
                                     look="warning" update="frValidDrp,frTabVuelcos" />
                    <f:facet name="footer">
                        <b:button value="Cerrar" dismiss="modal" onclick="return false;"/>
                    </f:facet>
                </b:panel>
            </h:form>
        </b:modal>      

        <h:form id="frTabVuelcos" prependId="false">
            <b:panel title="Vuelco" look="info" collapsible="false" style="height: 100%" >
                <b:row>
                    <b:column span="12" >
                        <b:commandButton icon="glyphicon-refresh" update="frTabVuelcos" value="Actualizar" look="success" title="Actualizar para la carga"/>
                    </b:column>
                </b:row>
                <b:row>
                    <b:column span="12">
                        <!-- Inicio Formulario de horario de descargas -->
                        <b:label tooltip="Utilice este formulario para ingresar los días y horarios de descarga, Si corresponde." 
                                 text="Horario de Descargas" severity="info"/>
                        <b:panel id="pnFormHorDesc" look="info">
                            <b:row>
                                <b:column span="12">
                                    <b:switch disabled="#{mbDeclaraciones.declaracion.firmante ne null}" value="#{mbDeclaraciones.vuelco.horarioDiscontinuo}" 
                                              label="" caption="Horario de Vuelcos" 
                                              onchange="ajax:mbDeclaraciones.habilitarDiasVuelco()" >
                                        <p:ajax event="change" update="cmbDiaDes,pnHorIniDesc,pnHorFinDesc,btnAddDiaVlc,btnLimDiaVlc,btnCanDiaVlc"/>
                                    </b:switch>
                                </b:column>
                            </b:row>
                            <b:row>
                                <b:column span="6">
                                    <b:selectOneMenu disabled="#{mbDeclaraciones.vuelco.horarioDiscontinuo}" label="Día" id="cmbDiaDes" value="#{mbDeclaraciones.diaVuelco.codDia}" >
                                        <f:selectItem itemLabel="(Seleccionar)" itemValue="" noSelectionOption="true" />  
                                        <f:selectItems value="#{mbDeclaraciones.mapDiaVuelcoSemana.entrySet()}" var="diaVuelcoSemana" 
                                                       itemLabel="#{diaVuelcoSemana.value}" itemValue="#{diaVuelcoSemana.key}" />
                                    </b:selectOneMenu>
                                </b:column>
                                <b:column span="3">
                                    <b:label tooltip="Hora de inicio de la Descarga." text="Inicio Descarga" severity="info"/>
                                    <b:panel id="pnHorIniDesc" look="info" collapsible="false">
                                        <b:row>
                                            <b:column span="6">
                                                <b:inputText disabled="#{mbDeclaraciones.vuelco.horarioDiscontinuo}" label="Hora" 
                                                             value="#{mbDeclaraciones.diaVuelco.horasInicDesc}" >
                                                    <f:validateLongRange minimum="0" maximum="23" />
                                                </b:inputText>
                                            </b:column>
                                            <b:column span="6">
                                                <b:inputText disabled="#{mbDeclaraciones.vuelco.horarioDiscontinuo}" label="Min" 
                                                             value="#{mbDeclaraciones.diaVuelco.minInicDesc}" >
                                                    <f:validateLongRange minimum="0" maximum="59" />
                                                </b:inputText>
                                            </b:column>
                                        </b:row>
                                    </b:panel>
                                </b:column>
                                <b:column span="3">
                                    <b:label tooltip="Hora de finalización de la Descarga." text="Fin Descarga" severity="info"/>
                                    <b:panel id="pnHorFinDesc" look="info" collapsible="false">
                                        <b:row>
                                            <b:column span="6">
                                                <b:inputText disabled="#{mbDeclaraciones.vuelco.horarioDiscontinuo}" label="Hora" 
                                                             value="#{mbDeclaraciones.diaVuelco.horasFinDesc}" >
                                                    <f:validateLongRange minimum="0" maximum="23" />
                                                </b:inputText>
                                            </b:column>
                                            <b:column span="6">
                                                <b:inputText disabled="#{mbDeclaraciones.vuelco.horarioDiscontinuo}" label="Min" 
                                                             value="#{mbDeclaraciones.diaVuelco.minFinDesc}" >
                                                    <f:validateLongRange minimum="0" maximum="59" />
                                                </b:inputText>
                                            </b:column>
                                        </b:row>
                                    </b:panel>
                                </b:column>
                            </b:row>
                            <br></br>
                            <b:row>
                                <b:column span="12" >
                                    <b:button title="Breve explicación del proceso de registro de un Día de Descarga" onclick="$('.modalAyudaFrmHorarios').modal();return false;" size="xs" look="warning" value="Ayuda" />
                                    <b:commandButton id="btnAddDiaVlc" disabled="#{mbDeclaraciones.declaracion.firmante ne null or mbDeclaraciones.vuelco.horarioDiscontinuo}" 
                                                     icon="glyphicon-ok" title="Agregar el Día nuevo o guardar la actualización de uno existente" 
                                                     action="#{mbDeclaraciones.addDiaVuelco()}" size="xs" look="primary" 
                                                     value="#{mbDeclaraciones.gralGuardar}" ajax="true" update="frTabVuelcos,messages" />
                                    <b:commandButton id="btnLimDiaVlc" disabled="#{mbDeclaraciones.declaracion.firmante ne null or mbDeclaraciones.vuelco.horarioDiscontinuo}" 
                                                     icon="glyphicon-remove-circle" title="Limpiar los datos ingresados sin guardar o deshacer los cambios de la acutalización" 
                                                     size="xs" look="danger" value="#{mbDeclaraciones.mdLimpiar}" 
                                                     action="#{mbDeclaraciones.limpiarDiaVuelco()}" update="frTabVuelcos" />
                                    <b:commandButton id="btnCanDiaVlc" disabled="#{mbDeclaraciones.declaracion.firmante ne null or mbDeclaraciones.vuelco.horarioDiscontinuo}" 
                                                     icon="glyphicon-minus-sign" title="Cancelar la selección del día para su actualización" size="xs" value="#{mbDeclaraciones.gralCancelarSel}" 
                                                     action="#{mbDeclaraciones.cancelarDiaVuelcoSel()}" update="frTabVuelcos" />
                                </b:column>
                            </b:row> 
                            <br></br>
                            <b:row>
                                <b:column span="12" >
                                    <b:dataTable id="dtDiasVuelco" value="#{mbDeclaraciones.lstDiasVuelco}" var="diaVuelco" 
                                                 styleClass="table table-striped table-bordered" style="font-size: 12px" >
                                        <h:column>
                                            <f:facet name="header">
                                              <h:outputText value="Nombre" />
                                            </f:facet>
                                            <h:outputText value="#{diaVuelco.nombre}" />
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">
                                              <h:outputText value="Inicio descarga" />
                                            </f:facet>
                                            <h:outputText value="#{diaVuelco.horasInicDesc}:#{diaVuelco.minInicDesc}" />
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">
                                              <h:outputText value="Fin descarga" />
                                            </f:facet>
                                            <h:outputText value="#{diaVuelco.horasFinDesc}:#{diaVuelco.minFinDesc}" />
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">
                                              <h:outputText value="Acciones" />
                                            </f:facet>
                                            <b:commandButton disabled="#{mbDeclaraciones.declaracion.firmante ne null}" title="Editar" 
                                                             look="warning" ajax="true" size="xs" value="" icon="glyphicon-pencil" 
                                                             action="#{mbDeclaraciones.editDiaVuelco()}" update="frTabVuelcos" >
                                                <f:setPropertyActionListener value="#{diaVuelco}" target="#{mbDeclaraciones.diaVuelco}" /> 
                                                <p:ajax process="@this" />
                                            </b:commandButton>
                                            <b:commandButton disabled="#{mbDeclaraciones.declaracion.firmante ne null}" title="Eliminar" 
                                                             look="danger" ajax="true" size="xs" value="" icon="glyphicon-trash" 
                                                             action="#{mbDeclaraciones.removeDiaVuelco()}" update="frTabVuelcos" >
                                                <f:setPropertyActionListener value="#{diaVuelco}" target="#{mbDeclaraciones.diaVuelco}" />  
                                                <p:ajax process="@this" />
                                            </b:commandButton>
                                        </h:column>
                                    </b:dataTable>
                                </b:column>
                            </b:row>
                        </b:panel>
                        <!-- Fin Formulario de horario de descargas -->
                    </b:column>    
                </b:row>
                <b:row>
                    <b:column span="12" >
                        <b:label tooltip="De estar inscripto, obtener los datos desde aquí" text="Inscripción registro MAyDS" severity="info"/>
                        <b:panel collapsible="false" look="info">
                            <b:row>
                                <b:column span="12">
                                    <p:inputTextarea value="#{mbDeclaraciones.vuelco.procProduct}" style="font-weight: lighter; color: gray; font-size: 14px" 
                                            styleClass="form-control bf-no-message" label="Descripción del proceso productivo" 
                                            placeholder="Detallar aquí el proceso productivo del Establecimiento." maxlength="500" />
                                </b:column>
                            </b:row>
                            <b:row>
                                <b:column span="6">
                                    <b:switch disabled="#{mbDeclaraciones.declaracion.firmante ne null}" value="#{mbDeclaraciones.vuelco.inscripto}" label="" caption="Selec. Establecimiento en DRP" 
                                              onchange="ajax:mbDeclaraciones.habilitarGenDrp()" >
                                        <p:ajax event="change" update="frTabVuelcos"/>
                                    </b:switch>
                                </b:column>
                                <b:column span="6">
                                    <b:switch disabled="#{mbDeclaraciones.declaracion.firmante ne null}" value="#{mbDeclaraciones.vuelco.radioServido}" label="" caption="Radio de servido cloacas AySA" />
                                </b:column>
                            </b:row>
                            <b:row>
                                <b:column span="12">
                                    <b:button onclick="$('.modalAyudaVuelcoInscrip').modal();return false;" size="xs" look="warning" value="Ayuda" 
                                              style="margin-bottom: 10px" />
                                    <b:commandButton id="btnVuelcoValidarDrp" title="Validar DRP" oncomplete="$('.modalValidDrp').modal();return false;" 
                                                 size="xs" look="primary" value="#{mbDeclaraciones.mdAgregar}" icon="glyphicon-new-window" 
                                                 style="margin-bottom: 10px" ajax="true" disabled="#{not mbDeclaraciones.vuelco.inscripto or mbDeclaraciones.declaracion.firmante ne null}" />
                                    <b:commandButton id="btnVuelcoAcutalizarDrp" title="Actualizar listado" update="dtSup" ajax="true" size="xs" look="default" 
                                                     disabled="#{not mbDeclaraciones.vuelco.inscripto}" 
                                                     value="#{mbDeclaraciones.mdActualizar}" icon="glyphicon-refresh" style="margin-bottom: 10px" >
                                        <p:ajax update="frTabVuelcos" />
                                    </b:commandButton> 
                                </b:column>
                            </b:row>
                            
                            <h:panelGrid columns="3" style="width: 100%" rendered="#{mbDeclaraciones.vuelco.expNum gt 0}" >
                                <b:row>
                                    <b:column span="4">
                                        <b:inputText disabled="true" label="Número Expediente DRP: " value="#{mbDeclaraciones.vuelco.expNum}" />
                                        <b:inputText disabled="true" label="Año Expediente DRP: " value="#{mbDeclaraciones.vuelco.expAnio}" />
                                    </b:column>
                                    <b:column span="4">
                                        <b:inputText disabled="true" label="Número CAA: " value="#{mbDeclaraciones.vuelco.caaNum}" />
                                        <p:calendar disabled="true" label="Fecha venc. CAA.:" value="#{mbDeclaraciones.vuelco.caaFechaVenc}" pattern="dd/MM/yyyy" locale="es" />
                                    </b:column>
                                    <b:column span="4">
                                        <b:inputText disabled="true" label="Usuario DRP: " value="#{mbDeclaraciones.vuelco.usDrp}" />
                                        <b:inputText disabled="true" label="Nombre: " value="#{mbDeclaraciones.vuelco.nombreDrp}" />
                                    </b:column>
                                </b:row>
                            </h:panelGrid>
                            <h:panelGrid columns="3" style="width: 100%" rendered="#{mbDeclaraciones.vuelco.expNum gt 0}" >
                                <b:row>
                                    <b:column span="12">
                                        <b:inputText disabled="true" label="Desc.: " value="#{mbDeclaraciones.vuelco.descDrp}" />
                                    </b:column>
                                </b:row>
                            </h:panelGrid>
                        </b:panel>
                    </b:column>
                </b:row>
                
                <b:row>
                    <!-- Circuitos -->
                    <b:column span="5" >
                        <b:label tooltip="Indique las características de los diferentes circuitos de agua, previo al tratamiento." text="Características de los circuitos" severity="info"/>
                        <b:panel collapsible="false" look="info">
                            <b:row>
                                <b:column span="12" >
                                    <h:panelGrid columns="1"  cellpadding="5">
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.circCerrRefrig}" label="" caption="Circuito  cerrado de refrigeración" />
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.recircAgua}" label="" caption="Recirculación de agua" />
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.lavaPisosInd}" label="" caption="Lavado de pisos de locales industriales" />
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.circAbierntRefrig}" label="" caption="Circuito abierto de refrigeración" />
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.caldera}" label="" caption="Caldera" />
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.captaAguaSubte}" label="" caption="Captación de Agua Subterránea" />
                                    </h:panelGrid>
                                </b:column>
                            </b:row>
                        </b:panel>
                    </b:column>
                    <!-- Calidad afluente -->
                    <b:column span="7" >
                        <b:label tooltip="Indique si el líquido residual crudo contiene alguna de estas sustancias, previo al tratamiento." text="Calidad del Afluente" severity="info"/>
                        <b:panel collapsible="false" look="info">
                            <b:row>
                                <b:column span="6" >
                                    <h:panelGrid columns="1"  cellpadding="5">
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.arsenico}" label="" caption="Arsénico" />
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.cadmio}" label="" caption="Cadmio" />
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.cianuro}" label="" caption="Cianuro" />
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.cromo}" label="" caption="Cromo" />
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.detergentes}" label="" caption="Detergentes" />
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.fenoles}" label="" caption="Fenoles" />
                                    </h:panelGrid>
                                </b:column>
                                <b:column span="6" >
                                    <h:panelGrid columns="1"  cellpadding="5">
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.hidrocarburos}" label="" caption="Hidrocarburos" />
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.mercurio}" label="" caption="Mercurio" />
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.plomo}" label="" caption="Plomo" />
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.solventesOrg}" label="" caption="Solvente Orgánico" />
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.solidosSediment}" label="" caption="S.S.E.E." />
                                        <b:selectBooleanCheckbox value="#{mbDeclaraciones.vuelco.sustSolubles}" label="" caption="Sulfuros" />
                                    </h:panelGrid>
                                </b:column>
                            </b:row>
                        </b:panel>
                    </b:column>
                </b:row>
                <!-- Características afluente -->
                <b:row>
                    <b:column span="12" >
                        <b:label tooltip="Indique el grado de acidez del afluente, previo al tratamiento." text="Carcaterística del Afluente" severity="info"/>
                        <b:panel collapsible="false" look="info">
                            <b:row>
                                <b:column span="4" >
                                    <b:selectBooleanCheckbox id="chkAcido" onclick="deshabilitarNoAcido();" 
                                                             disabled="#{mbDeclaraciones.vuelco.neutro or mbDeclaraciones.vuelco.alcalino}"
                                                             value="#{mbDeclaraciones.vuelco.acido}" label="" caption="pH menor o igual a 6 ACIDO" />
                                </b:column>
                                <b:column span="4" >
                                    <b:selectBooleanCheckbox id="chkNeutro" onclick="deshabilitarNoNeutro()" 
                                                             disabled="#{mbDeclaraciones.vuelco.acido or mbDeclaraciones.vuelco.alcalino}" 
                                                             value="#{mbDeclaraciones.vuelco.neutro}" label="" caption="pH entre 6 y 8 NEUTRO" />
                                </b:column>
                                <b:column span="4" >
                                    <b:selectBooleanCheckbox id="chkAlcalino" onclick="deshabilitarNoAlcalino()" 
                                                             disabled="#{mbDeclaraciones.vuelco.neutro or mbDeclaraciones.vuelco.acido}" 
                                                             value="#{mbDeclaraciones.vuelco.alcalino}" label="" caption="pH mayor o igual a 8 ALCALINO" />
                                </b:column>
                            </b:row>
                        </b:panel>
                    </b:column>
                </b:row>
                
                <b:row>
                    <b:column span="12" >
                        <b:label tooltip="Ingrese los datos correspondientes a las distintas autorizaciones del vertido" text="Autorizaciones" severity="info"/>
                        <b:panel collapsible="false" look="info">
                            <b:row>
                                <b:column span="5">
                                    <b:inputText id="lola" label="Organismo Autorizante" value="#{mbDeclaraciones.vuelco.orgAutorizante}" />
                                </b:column>
                                <b:column span="2">
                                    <b:inputText label="Caudal m3/d" value="#{mbDeclaraciones.vuelco.caudalAutorizado}" >
                                        <f:validateDoubleRange />
                                    </b:inputText>
                                </b:column>
                                <b:column span="5">
                                    <b:inputText label="Calle factibilidad" value="#{mbDeclaraciones.vuelco.calleFactibilidad}" />
                                </b:column>
                            </b:row>
                        </b:panel>
                    </b:column>
                </b:row>
                
                <b:row>
                    <b:column span="12" >
                        <b:button onclick="$('.modalAyudaVuelcoGral').modal();return false;" size="sm" look="warning" value="Ayuda" />
                        <b:commandButton disabled="#{mbDeclaraciones.declaracion.firmante ne null}" 
                                         icon="glyphicon-ok" rendered="#{not mbDeclaraciones.datosVuelco}" 
                                         title="Guardar las carcterísticas del vuelco en la Declaración" size="sm" 
                                         action="#{mbDeclaraciones.createVuelcos()}" 
                                         look="primary" value="#{mbDeclaraciones.vlcGuardar}" ajax="true" 
                                         update="frNav,frValidDrp,frTabVuelcos,messages" />
                        <b:commandButton disabled="#{mbDeclaraciones.declaracion.firmante ne null}" icon="glyphicon-trash" 
                                         rendered="#{not mbDeclaraciones.datosVuelco}" 
                                         title="Limpiar las características del vuelco seleccionados" size="sm" 
                                         action="#{mbDeclaraciones.limpiarVuelco()}" 
                                         look="danger" value="#{mbDeclaraciones.vlcLimpiar}" 
                                         ajax="true" update="@next,frValidDrp,frTabVuelcos,messages" />
                        <b:commandButton disabled="#{mbDeclaraciones.declaracion.firmante ne null}" icon="glyphicon-ok" rendered="#{mbDeclaraciones.datosVuelco}" 
                                         title="Actualizar las caracterísicas del vuelco de la Declaración" size="sm" 
                                         action="#{mbDeclaraciones.editVuelcos()}" look="primary" 
                                         value="#{mbDeclaraciones.vlcActualizar}" ajax="true" update="messages" />
                        <b:commandButton disabled="#{mbDeclaraciones.declaracion.firmante ne null}" icon="glyphicon-trash" rendered="#{mbDeclaraciones.datosVuelco}" 
                                         title="Eliminar las características del vuelco de la Declaración" size="sm" 
                                         action="#{mbDeclaraciones.deleteVuelco()}" look="danger" 
                                         value="#{mbDeclaraciones.vlcEliminar}" ajax="true" update="frNav,frValidDrp,frTabVuelcos" />
                    </b:column>
                </b:row>
                
            </b:panel>
        </h:form>
    </h:body>
    <script type="text/javascript">
        var activeAcido;
        var saveAcido;
        var activeNetutro;
        var saveNeutro;
        var activeAlcalino;
        var saveAlcalino;
        
        function deshabilitarNoAcido(){
            if(#{mbDeclaraciones.vuelco.acido}){
                saveAcido = true;
            }
            if(activeAcido){
                if(saveAcido){
                    frTabVuelcos:input_chkAlcalino.disabled = true;
                    frTabVuelcos:input_chkNeutro.disabled = true;
                    activeAcido = false;
                }else{
                    frTabVuelcos:input_chkAlcalino.disabled = false;
                    frTabVuelcos:input_chkNeutro.disabled = false;
                    activeAcido = false;
                }
            }else{
                if(saveAcido){
                    frTabVuelcos:input_chkAlcalino.disabled = false;
                    frTabVuelcos:input_chkNeutro.disabled = false;
                    activeAcido = true;
                }else{
                    frTabVuelcos:input_chkAlcalino.disabled = true;
                    frTabVuelcos:input_chkNeutro.disabled = true;
                    activeAcido = true;
                }
            }
        }
        function deshabilitarNoNeutro(){
            if(#{mbDeclaraciones.vuelco.neutro}){
                saveNeutro = true;
            }
            if(activeNetutro){
                if(saveNeutro){
                    frTabVuelcos:input_chkAlcalino.disabled = true;
                    frTabVuelcos:input_chkAcido.disabled = true;
                    activeNetutro = false;
                }else{
                    frTabVuelcos:input_chkAlcalino.disabled = false;
                    frTabVuelcos:input_chkAcido.disabled = false;
                    activeNetutro = false;
                }
            }else{
                if(saveNeutro){
                    frTabVuelcos:input_chkAlcalino.disabled = false;
                    frTabVuelcos:input_chkAcido.disabled = false;
                    activeNetutro = true;
                }else{
                    frTabVuelcos:input_chkAlcalino.disabled = true;
                    frTabVuelcos:input_chkAcido.disabled = true;
                    activeNetutro = true;
                }
            }
        }
        function deshabilitarNoAlcalino(){
            if(#{mbDeclaraciones.vuelco.alcalino}){
                saveAlcalino = true;
            }        
            if(activeAlcalino){
                if(saveAlcalino){
                    frTabVuelcos:input_chkNeutro.disabled = true;
                    frTabVuelcos:input_chkAcido.disabled = true;
                    activeAlcalino = false;
                }else{
                    frTabVuelcos:input_chkNeutro.disabled = false;
                    frTabVuelcos:input_chkAcido.disabled = false;
                    activeAlcalino = false;
                }
            }else{
                if(saveAlcalino){
                    frTabVuelcos:input_chkNeutro.disabled = false;
                    frTabVuelcos:input_chkAcido.disabled = false;
                    activeAlcalino = true;
                }else{
                    frTabVuelcos:input_chkNeutro.disabled = true;
                    frTabVuelcos:input_chkAcido.disabled = true;
                    activeAlcalino = true;
                }
            }
        }

        function closeModalValidDrp() {
            $('.modalValidDrp').modal('hide');
        }
    </script>   
</html>
